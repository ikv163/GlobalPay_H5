(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-assets-qrCode-index"],{2402:function(e,t,a){"use strict";(function(e){var i=a("ee27");a("d81d"),a("d3b7"),a("07ac"),a("e25e"),a("ac1f"),a("25f0"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("c964")),s=i(a("549d")),r=i(a("e0c9")),c=i(a("2072")),l={data:function(){return{base64:"",qrcodeSrc:"",imagesSelect:!1,account:"",accountName:"",local:"请选择二维码所在地",selectType:[{value:"wechat",icon:"weixin",name:"微信",qr_type:"2"},{value:"alipay",icon:"zhifubao1",name:"支付宝",qr_type:"1"},{value:"union_pay",icon:"yunshanfu",name:"云闪付",qr_type:"3"},{value:"bank",icon:"bank",name:"银行卡",qr_type:"4"}],pay_type:[],index:0,bankNewList:[],bankOriginNewList:[],current:0,per_day_amount:100,per_day_orders:1,alipay_uid:"",qr_type:"2",qr_address_manual:"",real_name:"",telephone:"",bank_code:"",bank_card_number:"",bank_address:"",currentQrTypeIndex:0,pay_type_select:[],pay_type_value:null}},components:{mInput:s.default,mIcon:r.default,wPicker:c.default},onLoad:function(){},onReady:function(){},onShow:function(){this.getBankList(),this.getQrPayType()},onPullDownRefresh:function(){},methods:{getBankList:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getBankList();case 2:a=t.sent,e.bankOriginNewList=Object.values(a.data),e.bankNewList=e.bankOriginNewList.map((function(e){return e.BankTypeName})),e.bank_code=e.bankOriginNewList[e.index].BankTypeCode;case 6:case"end":return t.stop()}}),t)})))()},bankListChange:function(e){this.index=e.target.value,this.bank_code=this.bankOriginNewList[this.index].BankTypeCode},getQrPayType:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.getQrPayType();case 2:i=a.sent,t.pay_type=i.data,t.pay_type_select=i.data[1],t.pay_type_value=i.data[1].sub_pay_types[0].pay_type,e("log",i.data," at pages/assets/qrCode/index.vue:230");case 7:case"end":return a.stop()}}),a)})))()},getPayTypeString:function(e){return e.toString()},onConfirm:function(e){this.local=e.result},selectLocal:function(){this.$refs.region.show()},sliderChangeAmount:function(e){this.per_day_amount=e.detail.value},sliderChangeOrder:function(e){this.per_day_orders=e.detail.value},radioChangeQrType:function(e){var t=this,a=e.target.value;this.pay_type_select.sub_pay_types.map((function(e,i){e.pay_type===parseInt(a)&&(t.currentQrTypeIndex=i,t.pay_type_value=e.pay_type)}))},radioChange:function(e){var t=this,a=e.target.value;this.selectType.map((function(e,i){e.value===a&&(t.qr_type=e.qr_type,t.current=i)}));var i=[];this.pay_type.map((function(e,t){switch(a){case"alipay":1==e.pay_type&&(i=e);break;case"wechat":2==e.pay_type&&(i=e);break;case"union_pay":3==e.pay_type&&(i=e);break;case"bank":4==e.pay_type&&(i=e);break}})),this.pay_type_select=i},addQrcode:function(){var e=this;uni.chooseImage({count:6,sizeType:["original"],sourceType:["album"],success:function(t){e.urlTobase64(t.tempFilePaths[0]),e.qrcodeSrc=t.tempFilePaths[0],e.imagesSelect=!0}})},urlTobase64:function(e){var t=this;uni.request({url:e,method:"GET",responseType:"arraybuffer",success:function(e){var a=wx.arrayBufferToBase64(e.data);a="data:image/jpeg;base64,"+a,t.base64=a}})},iconStyle:function(e){return"wechat"==e?"#3BB034":"#1296DB"},submit:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var i,n,s,r,c,l,o,u,d,p,v,b,f,y,_,w,m,h,k;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.account.replace(/\s*/g,""),n=t.accountName.replace(/\s*/g,""),s=t.base64,r=t.qr_type,c=t.local,l=t.per_day_amount,o=t.per_day_orders,u=t.qr_address_manual,d="请先上传二维码图片！！",p=!1,v=t.alipay_uid,b=t.real_name,f=t.telephone,y=t.bank_card_number,_=t.bank_code,w=t.bank_address,m="3"==t.qr_type||"4"==t.qr_type,h=t.pay_type_value,""==s&&""==u?d="请先上传二维码图片或手动输入二维码地址！！":""==i?d="请填写账户名!":""==n?d="请输入昵称!":"请选择二维码所在地"==c?d="请选择二维码所在!":m&&""==b?d="请填写真实姓名!":m&&""==f?d="请填写手机号码!":m&&""==y?d="请填写银行卡号!":m&&""==_?d="银行类型参数有误!":m&&""==w?d="请填写开户行地址!":null==h?d="请填写接单类型!":p=!0,!p){a.next=28;break}return uni.showLoading({}),a.next=23,t.$api.addQrcode({qr_account:i,qr_nickname:n,qr_address:s,qr_type:r,qr_location:c,per_day_amount:l,per_day_orders:o,alipay_uid:v,qr_address_manual:u,real_name:b,telephone:f,bank_card_number:y,bank_code:_,bank_address:w,allow_order_type:h});case 23:k=a.sent,"添加二维码成功"==k.msg&&uni.showToast({title:"添加二维码成功!",icon:"none",success:function(){setTimeout((function(){uni.navigateBack({delta:0})}),1e3)}}),k.error&&e("log","上传失败"," at pages/assets/qrCode/index.vue:427"),a.next=29;break;case 28:uni.showToast({title:d,icon:"none"});case 29:case"end":return a.stop()}}),a)})))()}}};t.default=l}).call(this,a("0de9")["log"])},"31b1":function(e,t,a){var i=a("35db");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("3a2c7148",i,!0,{sourceMap:!1,shadowMode:!1})},"35db":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".button-content[data-v-1e13f63c]{background:#ee1b57;padding:%?20?% %?0?%;width:%?400?%;font-size:%?30?%;border-radius:%?10?%;bottom:%?200?%;margin:auto;color:#fff;text-align:center;margin-top:%?100?%}.qrcode-content[data-v-1e13f63c]{padding-bottom:%?50?%}.qrcodeLocal[data-v-1e13f63c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?50?%}.select-li-name[data-v-1e13f63c]{margin-left:%?50?%;font-size:%?30?%}.changeLocal[data-v-1e13f63c]{font-size:%?30?%;color:#ee1b57}.qrcode-tips[data-v-1e13f63c]{color:red;font-size:%?20?%;margin-top:%?20?%;margin-bottom:%?20?%;margin-left:%?20?%}.qrcode-select-type[data-v-1e13f63c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?20?%}.qrcode-select-li[data-v-1e13f63c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.qrcode-head[data-v-1e13f63c]{background:#ee1b57;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?50?% %?0?%}.imgStyle[data-v-1e13f63c]{width:100%;height:100%}.qrcode-label-input[data-v-1e13f63c] .m-input-input{border:0;padding-bottom:0;font-size:%?20?%}.qrcode-label[data-v-1e13f63c]{padding:%?20?% %?40?%;font-size:%?30?%}.qrcode-label-input[data-v-1e13f63c]{border-top:1px solid hsla(0,0%,50.2%,.28);border-bottom:1px solid hsla(0,0%,50.2%,.28);padding:%?20?% %?40?%;background:#fff}.qrcode-view[data-v-1e13f63c]{height:%?200?%;width:%?200?%;background:#fff;font-size:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),e.exports=t},4399:function(e,t,a){"use strict";var i=a("31b1"),n=a.n(i);n.a},"6d8b":function(e,t,a){"use strict";a.r(t);var i=a("2402"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},a48a:function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"qrcode-content"},[a("v-uni-view",{staticClass:"qrcode-head"},[a("v-uni-view",{staticClass:"qrcode-view",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addQrcode.apply(void 0,arguments)}}},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.imagesSelect,expression:"!imagesSelect"}]},[e._v("添加二维码")]),a("img",{directives:[{name:"show",rawName:"v-show",value:e.imagesSelect,expression:"imagesSelect"}],staticClass:"imgStyle",attrs:{src:e.qrcodeSrc,alt:""}})],1)],1),a("v-uni-view",{staticClass:"qrcode-list"},[a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("二维码地址:")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入二维码地址!"},model:{value:e.qr_address_manual,callback:function(t){e.qr_address_manual=t},expression:"qr_address_manual"}})],1),a("v-uni-view",{staticClass:"qrcode-tips"},[e._v("如果上传二维码不成功,请手动填写二维码地址!")])],1),a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("账户名")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入账户名"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1)],1),a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("昵称")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入昵称"},model:{value:e.accountName,callback:function(t){e.accountName=t},expression:"accountName"}})],1)],1),a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("选择二维码类型")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChange.apply(void 0,arguments)}}},e._l(e.selectType,(function(t,i){return a("v-uni-view",{key:t.value,staticClass:"qrcode-select-type"},[a("v-uni-view",{staticClass:"qrcode-select-li"},[a("v-uni-view",{staticClass:"select-li-icon"},[a("mIcon",{staticClass:"icon-style",attrs:{type:t.icon,color:e.iconStyle(t.value),size:"20"}})],1),a("v-uni-view",{staticClass:"select-li-name"},[e._v(e._s(t.name))])],1),a("v-uni-view",{staticClass:"label"},[a("v-uni-radio",{attrs:{value:t.value,checked:i===e.current}})],1)],1)})),1)],1)],1),a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("允许接单类型")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChangeQrType.apply(void 0,arguments)}}},e._l(e.pay_type_select.sub_pay_types,(function(t,i){return a("v-uni-view",{key:t.value,staticClass:"qrcode-select-type"},[a("v-uni-view",{staticClass:"qrcode-select-li"},[a("v-uni-view",{staticClass:"select-li-name"},[e._v(e._s(t.pay_type_name))])],1),a("v-uni-view",{staticClass:"label"},[a("v-uni-radio",{attrs:{value:e.getPayTypeString(t.pay_type),checked:i===e.currentQrTypeIndex}})],1)],1)})),1)],1)],1),"1"==e.qr_type?a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("支付宝id")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入支付宝id"},model:{value:e.alipay_uid,callback:function(t){e.alipay_uid=t},expression:"alipay_uid"}})],1)],1):"3"==e.qr_type||"4"==e.qr_type?a("v-uni-view",[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("真实姓名")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入真实姓名"},model:{value:e.real_name,callback:function(t){e.real_name=t},expression:"real_name"}})],1),a("v-uni-view",{staticClass:"qrcode-label"},[e._v("手机号码")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入手机号码"},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),a("v-uni-view",{staticClass:"qrcode-label"},[e._v("银行卡号")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请输入银行卡号"},model:{value:e.bank_card_number,callback:function(t){e.bank_card_number=t},expression:"bank_card_number"}})],1),a("v-uni-view",{staticClass:"bank-list"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("银行类型")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("v-uni-picker",{attrs:{range:e.bankNewList,value:e.index},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bankListChange.apply(void 0,arguments)}}},[a("v-uni-view",[e._v(e._s(e.bankNewList[e.index]))])],1)],1)],1),a("v-uni-view",{staticClass:"qrcode-label"},[e._v("开户行地址")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("m-input",{staticClass:"m-input",attrs:{type:"text",placeholder:"请选择开户行地址"},model:{value:e.bank_address,callback:function(t){e.bank_address=t},expression:"bank_address"}})],1)],1):e._e(),a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("每日可收笔数")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("v-uni-slider",{attrs:{value:e.per_day_orders,min:"1",max:"100",step:"1","show-value":!0},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sliderChangeOrder.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"qrcodeUser"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("每日可收金额")]),a("v-uni-view",{staticClass:"qrcode-label-input"},[a("v-uni-slider",{attrs:{value:e.per_day_amount,step:"100",min:"100",max:"50000","show-value":!0},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sliderChangeAmount.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"qrcodeLocal"},[a("v-uni-view",{staticClass:"qrcode-label"},[e._v("二维码所在地:")]),a("v-uni-view",[a("v-uni-view",{staticClass:"changeLocal",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectLocal.apply(void 0,arguments)}}},[e._v(e._s(e.local))]),a("w-picker",{ref:"region",attrs:{mode:"region",defaultVal:["浙江省","杭州市"],areaCode:["33","3301"],hideArea:!0,themeColor:"#f00"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm.apply(void 0,arguments)}}})],1)],1)],1),a("v-uni-view",{staticClass:"button-content",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"buttonText"},[e._v("添加二维码")])],1)],1)},s=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}))},aac8:function(e,t,a){"use strict";a.r(t);var i=a("a48a"),n=a("6d8b");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("4399");var r,c=a("f0c5"),l=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"1e13f63c",null,!1,i["a"],r);t["default"]=l.exports}}]);